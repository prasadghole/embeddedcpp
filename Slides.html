<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<title>Embedded C++ with STM32 microcontrollers</title>
<style type="text/css">
.underline { text-decoration: underline; }
</style>
<link rel="stylesheet" href="./css/reveal.css"/>

<link rel="stylesheet" href="./css/theme/night.css" id="theme"/>


<!-- If the query includes 'print-pdf', include the PDF print sheet -->
<script>
    if( window.location.search.match( /print-pdf/gi ) ) {
        var link = document.createElement( 'link' );
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = './css/print/pdf.css';
        document.getElementsByTagName( 'head' )[0].appendChild( link );
    }
</script>
</head>
<body>
<div class="reveal">
<div class="slides">
<section id="sec-title-slide"><h1 class="title">Embedded C++ with STM32 microcontrollers</h1>
</section>

<section>
<section id="slide-org2727fb1">
<h2 id="org2727fb1">Setup</h2>
</section>
</section>
<section>
<section id="slide-org162e703">
<h2 id="org162e703">Why command line</h2>
<p>
In the world of feature rich IDE many things are implicitly hidden from user. In order to understand details of firmware building 
we will use command line tools initially. Once we understand lower level details we will move to IDE based development.
Command line tools are mostly tool/IDE agnostic hence moving from one to other toolchain becomeds much easier. 
Command line tools also helps in build automation.
</p>

</section>
</section>
<section>
<section id="slide-org2b5f020">
<h2 id="org2b5f020">Installing cross compiler</h2>
<ol>
<li>Go to the <a href="https://developer.arm.com">https://developer.arm.com</a></li>
<li>Click on Tools and software &gt;&gt; Open source Software &gt;&gt; GNU toolchain</li>
<li>Downlaod ARM GNU embedded toolchain as per your host platform (only 32 bit toolchains are available now)</li>

</ol>
<p>
<a href="https://developer.arm.com/tools-and-software/open-source-software/developer-tools/gnu-toolchain/gnu-rm/downloads">https://developer.arm.com/tools-and-software/open-source-software/developer-tools/gnu-toolchain/gnu-rm/downloads</a>
</p>

</section>
</section>
<section>
<section id="slide-org1812740">
<h2 id="org1812740">Verify installation</h2>

</section>
</section>
<section>
<section id="slide-org43010ec">
<h2 id="org43010ec">STM32F103 board</h2>
<div class="outline-text-2" id="text-org43010ec">
</div>
</section>
<section id="slide-orgef3ffbb">
<h3 id="orgef3ffbb">Evaluation firmware</h3>
<p>
<a href="https://my.st.com/content/my_st_com/en/products/embedded-software/mcu-mpu-embedded-software/stm32-embedded-software/stm32cube-mcu-mpu-packages/stm32cubef4.license=1562567706435.product=STM32CubeF4.version=1.24.0.html">https://my.st.com/content/my_st_com/en/products/embedded-software/mcu-mpu-embedded-software/stm32-embedded-software/stm32cube-mcu-mpu-packages/stm32cubef4.license=1562567706435.product=STM32CubeF4.version=1.24.0.html</a>
<a href="https://my.st.com/content/my_st_com/en/products/embedded-software/mcu-mpu-embedded-software/stm32-embedded-software/stm32cube-mcu-mpu-packages/stm32cubef7.html#resource">https://my.st.com/content/my_st_com/en/products/embedded-software/mcu-mpu-embedded-software/stm32-embedded-software/stm32cube-mcu-mpu-packages/stm32cubef7.html#resource</a>
</p>

</section>
</section>
<section>
<section id="slide-org1616053">
<h2 id="org1616053">stlink</h2>
<div class="outline-text-2" id="text-org1616053">
</div>
</section>
<section id="slide-orgae9416a">
<h3 id="orgae9416a">WARNING</h3>
<p>
Please make sure not to connect both external 5 volts power supply and USB power supply at same time.
</p>
</section>
<section id="slide-org249b157">
<h3 id="org249b157">ST link usb drive</h3>
<p>
Download usb driver from 
<a href="https://my.st.com/content/my_st_com/en/products/development-tools/software-development-tools/stm32-software-development-tools/stm32-utilities/stsw-link009.license=1564137466456.product=STSW-LINK009.version=2.0.1.html">https://my.st.com/content/my_st_com/en/products/development-tools/software-development-tools/stm32-software-development-tools/stm32-utilities/stsw-link009.license=1564137466456.product=STSW-LINK009.version=2.0.1.html</a>
 Run stlink<sub>winusb</sub><sub>install</sub> batch file to install driver.
</p>
</section>
<section id="slide-org693d85b">
<h3 id="org693d85b">ST link utilities</h3>
<p>
Download st link utility from 
<a href="https://my.st.com/content/my_st_com/en/products/development-tools/software-development-tools/stm32-software-development-tools/stm32-programmers/stsw-link004.html">https://my.st.com/content/my_st_com/en/products/development-tools/software-development-tools/stm32-software-development-tools/stm32-programmers/stsw-link004.html</a>
</p>

</section>
</section>
<section>
<section id="slide-org043722e">
<h2 id="org043722e">Debug Server</h2>
<div class="outline-text-2" id="text-org043722e">
</div>
</section>
<section id="slide-orgf06aed5">
<h3 id="orgf06aed5">OpenOCD</h3>
</section>
<section id="slide-orgbc1f29a">
<h3 id="orgbc1f29a">GDB Server</h3>
</section>
</section>
<section>
<section id="slide-org8aa940b">
<h2 id="org8aa940b">libopencm3 or STM HAL</h2>


</section>
</section>
<section>
<section id="slide-orgf2da602">
<h2 id="orgf2da602">STM32Cube Project</h2>
<ol>
<li>Create STM32Cube project</li>
<li>Select board</li>
<li>Give project Name</li>
<li>Select target C++</li>

</ol>
</section>
</section>
<section>
<section id="slide-org17d84ed">
<h2 id="org17d84ed">Hello World</h2>
<div class="outline-text-2" id="text-org17d84ed">
</div>
</section>
<section id="slide-org8bcf08f">
<h3 id="org8bcf08f">Write Program</h3>
</section>
<section id="slide-orga436c5e">
<h3 id="orga436c5e">Compliling</h3>
</section>
<section id="slide-orgd9d43a2">
<h3 id="orgd9d43a2">Linking</h3>
</section>
<section id="slide-org6917191">
<h3 id="org6917191">Loading firmware to target</h3>
<div class="outline-text-3" id="text-org6917191">
</div>
</section>
<section id="slide-orgf44c86e">
<h4 id="orgf44c86e">Converting to binary</h4>
<p>
ELf file consists of additional header informatio. but to load binary on target flash we need to strip down this 
additional information. 
</p>
<div class="org-src-container">

<pre  class="src src-shell"><code trim>
arm-none-eabi-objcopy -I elf -O binary firmware.elf firmware.bin

</code></pre>
</div>
</section>
<section id="slide-org516bf6d">
<h4 id="org516bf6d">Programming Controller</h4>
<div class="org-src-container">

<pre  class="src src-bash"><code trim>st-link_cli -C SWD -P firmware.bin <span style="color: #a45bad;">0x8000000</span> -V <span style="color: #2d9574;">"after_programming"</span>

</code></pre>
</div>
<p>
Linker scripts describes the
</p>
</section>
<section id="slide-org992e64c">
<h3 id="org992e64c">Debug</h3>
<div class="outline-text-3" id="text-org992e64c">
</div>
</section>
<section id="slide-org8177b38">
<h4 id="org8177b38">Start GDB server</h4>
</section>
<section id="slide-orgb82bd62">
<h4 id="orgb82bd62">load elf</h4>
</section>
<section id="slide-org3a04fa0">
<h4 id="org3a04fa0">Debug</h4>
</section>
</section>
<section>
<section id="slide-org45e3d1f">
<h2 id="org45e3d1f">C++ 14</h2>
<p>
C++ standard evolved more rapidly after release of 2011
</p>
</section>
</section>
<section>
<section id="slide-org82202c7">
<h2 id="org82202c7">Use namespece</h2>
<p>
Explain how we can use namespace to simplify naming of common static functions.
#+SRC<sub>BEGIN</sub> C++
</p>

<p>
#+SRC<sub>END</sub>
</p>

</section>
</section>
<section>
<section id="slide-org7695b53">
<h2 id="org7695b53">Strongly typed</h2>
<div class="outline-text-2" id="text-org7695b53">
</div>
</section>
<section id="slide-orgb5afce1">
<h3 id="orgb5afce1">enum class</h3>
</section>
</section>
<section>
<section id="slide-orgca59dce">
<h2 id="orgca59dce">Function Inline</h2>
<p>
Macros can be replaced with strongly typed
</p>
</section>
</section>
<section>
<section id="slide-org644596d">
<h2 id="org644596d">Type Conversions</h2>
<div class="outline-text-2" id="text-org644596d">
</div>
</section>
<section id="slide-orgdfeaf88">
<h3 id="orgdfeaf88">dynamic<sub>cast</sub></h3>
</section>
<section id="slide-org801f98a">
<h3 id="org801f98a">reinterpret<sub>cast</sub></h3>
</section>
<section id="slide-org9cd214e">
<h3 id="org9cd214e">static<sub>cast</sub></h3>
</section>
<section id="slide-org9db37f7">
<h3 id="org9db37f7">const<sub>cast</sub></h3>
</section>
</section>
<section>
<section id="slide-orgc7d350c">
<h2 id="orgc7d350c">static asserts</h2>
<p>
This will help in compile time catching of errors.
</p>
</section>
</section>
<section>
<section id="slide-org307f6b4">
<h2 id="org307f6b4">Mixing C and C++  libraries</h2>
</section>
</section>
<section>
<section id="slide-orgf5163e3">
<h2 id="orgf5163e3">Referances</h2>
<div class="outline-text-2" id="text-orgf5163e3">
</div>
</section>
<section id="slide-org99cf792">
<h3 id="org99cf792">Gnu C</h3>
<div class="outline-text-3" id="text-org99cf792">
</div>
</section>
<section id="slide-org0b0ce2d">
<h4 id="org0b0ce2d">Predefined macros</h4>
<p>
<a href="https://gcc.gnu.org/onlinedocs/cpp/Common-Predefined-Macros.html">https://gcc.gnu.org/onlinedocs/cpp/Common-Predefined-Macros.html</a>
</p>
</section>
<section id="slide-orgdfe22cf">
<h3 id="orgdfe22cf">Keil library</h3>
<div class="outline-text-3" id="text-orgdfe22cf">
</div>
</section>
<section id="slide-org6ddfb0c">
<h4 id="org6ddfb0c">run time library support</h4>
<p>
<a href="http://www.keil.com/support/man/docs/armlib/armlib_chr1358938908603.htm">http://www.keil.com/support/man/docs/armlib/armlib_chr1358938908603.htm</a>
</p>

<p>
C++ libraries need C libraries for target specific support.
</p>
</section>
</section>
<section>
<section id="slide-org7be57b7">
<h2 id="org7be57b7">Templates</h2>
</section>
</section>
<section>
<section id="slide-org3666c0f">
<h2 id="org3666c0f">std::Array</h2>
</section>
</section>
</div>
</div>
<script src="./js/reveal.js"></script>

<script>
// Full list of configuration options available here:
// https://github.com/hakimel/reveal.js#configuration
Reveal.initialize({
multiplex: {
    secret: '', // null if client
    id: '', // id, obtained from socket.io server
    url: '' // Location of socket.io server
},

// Optional libraries used to extend on reveal.js
dependencies: [
 { src: './lib/js/classList.js', condition: function() { return !document.body.classList; } },
 { src: './plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
 { src: './plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
 { src: './plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
 { src: './plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }]
});
</script>
</body>
</html>
