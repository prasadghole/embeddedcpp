<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<title>Embedded C++</title>
<style type="text/css">
.underline { text-decoration: underline; }
</style>
<link rel="stylesheet" href="./css/reveal.css"/>

<link rel="stylesheet" href="./css/theme/moon.css" id="theme"/>

<link rel="stylesheet" href="./mystyle.css"/>

<!-- If the query includes 'print-pdf', include the PDF print sheet -->
<script>
    if( window.location.search.match( /print-pdf/gi ) ) {
        var link = document.createElement( 'link' );
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = './css/print/pdf.css';
        document.getElementsByTagName( 'head' )[0].appendChild( link );
    }
</script>
</head>
<body>
<div class="reveal">
<div class="slides">
<section id="sec-title-slide"><h1 class="title">Embedded C++</h1>
</section>
<section>
<section id="slide-orgc17ba88">
<h2 id="orgc17ba88">Introduction to C++</h2>
</section>
</section>
<section>
<section id="slide-orgb89188d">
<h2 id="orgb89188d">Why C++ over C</h2>
<div class="outline-text-2" id="text-orgb89188d">
</div>
</section>
<section id="slide-orga09c06d">
<h3 id="orga09c06d">C++ is superset of C</h3>
<p>
C++ is almost a super set of C. If you write any C source code or C source file. C++ compiler will acts as C compiler.
This helps in smooth migration of existing C to C++.
</p>
</section>
<section id="slide-org357dae1">
<h3 id="org357dae1">Default arguments to functions</h3>
</section>
<section id="slide-orgcebf01d">
<h3 id="orgcebf01d">Function name overloading</h3>
</section>
<section id="slide-org29f01f3">
<h3 id="org29f01f3">References</h3>
<p>
A C++ reference is identical to C pointers. But they are safer as they can't be null and can't be uninitialized.
</p>
</section>
<section id="slide-org04669b4">
<h3 id="org04669b4">Classes and struct</h3>
<p>
Classes are similar to structs. A member function is a function which take pointer to 
object of class as an implicit parameter. 
Class with member function is similar to C struct and a function which
takes structs as argument.
</p>

</section>
<section id="slide-org04669b4-split">

<div class="org-src-container">

<pre  class="src src-C++"><code trim><span style="color: #4f97d7; font-weight: bold;">class</span> <span style="color: #ce537a; font-weight: bold;">A</span> <span style="color: #4f97d7;">{</span>
<span style="color: #4f97d7; font-weight: bold;">public</span>:
<span style="color: #ce537a; font-weight: bold;">int</span> <span style="color: #bc6ec5; font-weight: bold;">GetX</span><span style="color: #bc6ec5;">()</span>;
<span style="color: #4f97d7; font-weight: bold;">private</span>:
<span style="color: #ce537a; font-weight: bold;">int</span> <span style="color: #7590db;">x</span>;

<span style="color: #4f97d7;">}</span>

<span style="color: #ce537a; font-weight: bold;">int</span> <span style="color: #a45bad;">A</span>::<span style="color: #bc6ec5; font-weight: bold;">GetX</span><span style="color: #4f97d7;">()</span>
<span style="color: #4f97d7;">{</span>
<span style="color: #4f97d7; font-weight: bold;">return</span> x;
<span style="color: #4f97d7;">}</span>

</code></pre>
</div>

<div class="org-src-container">

<pre  class="src src-C"><code trim><span style="color: #4f97d7; font-weight: bold;">struct</span> <span style="color: #ce537a; font-weight: bold;">A</span> <span style="color: #4f97d7;">{</span>
<span style="color: #ce537a; font-weight: bold;">int</span> <span style="color: #7590db;">x</span>;
<span style="color: #4f97d7;">}</span>

<span style="color: #ce537a; font-weight: bold;">int</span> <span style="color: #bc6ec5; font-weight: bold;">GetX</span><span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">struct</span>  <span style="color: #ce537a; font-weight: bold;">A</span> * <span style="color: #7590db;">this</span><span style="color: #4f97d7;">)</span>
<span style="color: #4f97d7;">{</span>
<span style="color: #4f97d7; font-weight: bold;">return</span> this-&gt;x;
<span style="color: #4f97d7;">}</span> 
</code></pre>
</div>

</section>
<section id="slide-org386354d">
<h3 id="org386354d">Constructors and destructors</h3>
<p>
These are member function that is guaranteed to get called when objects are created and destroyed.
This make sure all objects are properly initialized and destroyed. This avoids resource leaks and initilization bugs. 
There is no way in C to make this implicitly.
</p>

<aside class="notes">
<p>
Discuss object creation on dynamic memory pool.
</p>

</aside>

</section>
<section id="slide-orge41ab3c">
<h3 id="orge41ab3c">Namespaces</h3>
<p>
C++ namespace allow name reuse in different contexts. This avoids lengthy names with module/context prefixes like C.
</p>

</section>
<section id="slide-orgf39b132">
<h3 id="orgf39b132">Operator overloading</h3>
<p>
A C++ compiler replaces a function call when encounters an overloaded operator. 
Operator overloading improves the code readability if used properly.
</p>
</section>
</section>
<section>
<section id="slide-org28469fa">
<h2 id="org28469fa">Development tools</h2>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Vendor</th>
<th scope="col" class="org-left">C++ Standard</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Keil</td>
<td class="org-left">C++11</td>
</tr>

<tr>
<td class="org-left">ARM</td>
<td class="org-left">C++14</td>
</tr>

<tr>
<td class="org-left">IAR</td>
<td class="org-left">C++14</td>
</tr>

<tr>
<td class="org-left">GCC</td>
<td class="org-left">C++17</td>
</tr>
</tbody>
</table>
</section>
</section>
<section>
<section id="slide-org6a10ed3">
<h2 id="org6a10ed3">Evaluation Boards</h2>
<div class="outline-text-2" id="text-org6a10ed3">
</div>
</section>
<section id="slide-org5e668b8">
<h3 id="org5e668b8">Nucleo-F767ZI</h3>

<div class="figure">
<p><img src="./images/nucleo-f767.png" alt="nucleo-f767.png" />
</p>
</div>
</section>
<section id="slide-org53234b3">
<h3 id="org53234b3">Features</h3>
<ol>
<li>3 User LED</li>
<li>On board ST Link extension board for easy debugging</li>
<li>Mass storage</li>
<li>Virtual COM port</li>
<li>Flexible power supply options</li>
<li>Ethrnet RJ45</li>

</ol>
</section>
<section id="slide-orga9743c8">
<h3 id="orga9743c8">Nucleo-F303RE</h3>

<div class="figure">
<p><img src="./images/nucleo-f303.png" alt="nucleo-f303.png" />
</p>
</div>
</section>
<section id="slide-org49e15d3">
<h3 id="org49e15d3">Features</h3>
<ol>
<li>1 User LED</li>
<li>On board ST Link extension board for easy debugging</li>
<li>Mass storage</li>
<li>Virtual COM port</li>
<li>Flexible power supply options</li>

</ol>
</section>
<section id="slide-org683569b">
<h3 id="org683569b">Nucleo-L073RZ</h3>

<div class="figure">
<p><img src="./images/nucleo-L073rz.png" alt="nucleo-L073rz.png" />     
</p>
</div>
</section>
<section id="slide-orgafaab9e">
<h3 id="orgafaab9e">Features</h3>
<ol>
<li>1 User LED</li>
<li>On board ST Link extension board for easy debugging</li>
<li>Mass storage</li>
<li>Virtual COM port</li>
<li>Flexible power supply options</li>

</ol>
</section>
<section id="slide-orga324c4e">
<h3 id="orga324c4e">Setup</h3>

<div class="figure">
<p><img src="./images/stlink_setup.png" alt="stlink_setup.png" />
</p>
</div>
</section>
</section>
<section>
<section id="slide-orgbc91d3b">
<h2 id="orgbc91d3b">Programming tools stlink</h2>
<div class="outline-text-2" id="text-orgbc91d3b">
</div>
</section>
<section id="slide-org2109451">
<h3 id="org2109451">WARNING</h3>
<p>
Please make sure not to connect both external 5 volts power supply and USB power supply at same time.
</p>
</section>
<section id="slide-org75bb3d5">
<h3 id="org75bb3d5">ST link usb drive</h3>
<p>
Download usb driver from 
<a href="https://my.st.com/content/my_st_com/en/products/development-tools/software-development-tools/stm32-software-development-tools/stm32-utilities/stsw-link009.license=1564137466456.product=STSW-LINK009.version=2.0.1.html">https://my.st.com/content/my_st_com/en/products/development-tools/software-development-tools/stm32-software-development-tools/stm32-utilities/stsw-link009.license=1564137466456.product=STSW-LINK009.version=2.0.1.html</a>
 Run stlink<sub>winusb</sub><sub>install</sub> batch file to install driver.
</p>
</section>
<section id="slide-org570b903">
<h3 id="org570b903">ST link utilities</h3>
<p>
Download st link utility from 
<a href="https://my.st.com/content/my_st_com/en/products/development-tools/software-development-tools/stm32-software-development-tools/stm32-programmers/stsw-link004.html">https://my.st.com/content/my_st_com/en/products/development-tools/software-development-tools/stm32-software-development-tools/stm32-programmers/stsw-link004.html</a>
</p>

</section>
</section>
<section>
<section id="slide-org3e93719">
<h2 id="org3e93719">Debug Tools</h2>
<div class="outline-text-2" id="text-org3e93719">
</div>
</section>
<section id="slide-org6db685b">
<h3 id="org6db685b">OpenOCD and STM GDB server</h3>
<p>
<a href="http://openocd.org/doc/html/index.html">http://openocd.org/doc/html/index.html</a>
</p>

<p>
OpenOCD is a Open On-Chip debugger that provides programming,debugging  boudry-scan
testing for embedded device. It acts as a server and acceptss incoming
connection from GDB via port 3333 or telnet port 4444.
</p>
</section>
<section id="slide-orge1fb477">
<h3 id="orge1fb477">Setup</h3>

<div class="figure">
<p><img src="./images/stlink_setup.png" alt="stlink_setup.png" />
</p>
</div>

</section>
</section>
<section>
<section id="slide-org36ff0a0">
<h2 id="org36ff0a0">GCC cross compiler</h2>
<ol>
<li>Go to the <a href="https://developer.arm.com">https://developer.arm.com</a></li>
<li>Click on Tools and software &gt;&gt; Open source Software &gt;&gt; GNU toolchain</li>

</ol>
</section>
<section id="slide-org36ff0a0-split">
<ol>
<li>Downlaod ARM GNU embedded toolchain as per your host platform (only 32 bit toolchains are available now)</li>

</ol>
<p>
<a href="https://developer.arm.com/tools-and-software/open-source-software/developer-tools/gnu-toolchain/gnu-rm/downloads">https://developer.arm.com/tools-and-software/open-source-software/developer-tools/gnu-toolchain/gnu-rm/downloads</a>
</p>

</section>
</section>
<section>
<section id="slide-org6be0ea7">
<h2 id="org6be0ea7">stm32CubeIDE</h2>
<p>
ST has provided and eclipse based IDE which uses ARM Gcc backend to cross compile firmware. We will use this IDE to write , debug our 
firmware source code.
</p>
</section>
</section>
<section>
<section id="slide-org2fde0ca">
<h2 id="org2fde0ca">Verify installation</h2>
<div class="org-src-container">

<pre  class="src src-shell"><code trim>
arm-none-eabi-g++ --version

</code></pre>
</div>
</section>
</section>
<section>
<section id="slide-orgdcde65c">
<h2 id="orgdcde65c">Build Process</h2>

<div class="figure">
<p><img src="./images/buildProcess.png" alt="buildProcess.png" />
</p>
</div>
</section>
<section id="slide-org6f121ea">
<h3 id="org6f121ea">Cross compilation</h3>
<p>
Due to limited resources available on target hardware for running build tools development is mostly done on workstation or PC
with higher memory and speed. This machine is called host machine and it runs the build tool but generate binary which will 
run on different (mostly microcontroller) hardware. 
This process of generating code for different target is called cross compilation.
</p>
</section>
<section id="slide-org03f539e">
<h3 id="org03f539e">Compiling</h3>
<p>
Compiler translate source code into machine code for individual source file. 
Output of compilation process is object code.
</p>
</section>
<section id="slide-orgb06dd2b">
<h3 id="orgb06dd2b">Linking</h3>
<p>
Linker compose multiple objects file into one single executable file. For gcc toolchain output is mostly ELF.
<b><b>Executable Linker Format</b></b>
ELF file contains different sections
</p>
<ol>
<li>text</li>

</ol>
<p>
This section contains executable instructions of program. Controller's program counter always access instructions from this
memory area.
</p>
<ol>
<li>rodata</li>

</ol>
<p>
Contains read only values like constants. This section can be mapped to read only memory 
area.
</p>
</section>
<section id="slide-orgb06dd2b-split">
<ol>
<li>data</li>

</ol>
<p>
Containing the values of all the initialized variables of the program, accessible in the read/write mode at runtime. 
It is a section that contains all the variables, static or global, that have been initialized in the code. 
This area is remap to writable memory area as these values will be changing during program life time.
</p>
<ol>
<li>bss (Blocks started by Symbol)</li>

</ol>
<p>
This section reserved all uninitialized variables and objects accessible during program runtime for modification. 
Because there in no values here ELF only describes this section but do not provide any contents. Startup code should 
initialize bss section to zero.
</p>

</section>
<section id="slide-orgb06dd2b-split">

<p>
Every embedded target has different memory layout for program and data memory. Hence during linking process a custom linker 
script describing memory layout of target should be provided.
</p>
</section>
<section id="slide-org3d17d66">
<h3 id="org3d17d66">Loading</h3>
<p>
ELF file will be loaded to target system using programming tools or debug probes. ELF files need to be converted to 
format like intel hex or bin which then can be loaded at non volatile memory location accessible by program counter.
</p>

</section>
<section id="slide-orgd928a25">
<h3 id="orgd928a25">Execution</h3>
<p>
Upon reset controller will start executing text section loaded at reset address.
</p>
</section>
</section>
<section>
<section id="slide-orgba2c81f">
<h2 id="orgba2c81f">Linking</h2>
<div class="outline-text-2" id="text-orgba2c81f">
</div>
</section>
<section id="slide-orga481325">
<h3 id="orga481325">Script</h3>
<p>
The linker script is a file containing the description of the memory sections in the target, which need to be known in advance 
in order for the linker to place the symbols in the correct sections in flash, and instruct the firmware components about special 
locations in the memory mapping area that can be referenced in the code. 
</p>
</section>
<section id="slide-orga481325-split">
<p>
The file is recognizable by its .ld extension, and it is written in a specific language. As a rule of thumb, all the symbols from every 
single compiled object are grouped in the sections of the final executable image.
</p>
</section>
<section id="slide-org2c853b3">
<h3 id="org2c853b3">Custom Sections</h3>
<p>
Beside standard sections we can instruct linker to reserve custom sectors. 
</p>

<p>
For eg. To calculate CRC of flash image we need to make sure unused sectors are filled with known values. 
</p>

<div class="org-src-container">

<pre  class="src src-C"><code trim><span style="color: #4f97d7; font-weight: bold;">const</span> <span style="color: #ce537a; font-weight: bold;">uint8_t</span>
<span style="color: #4f97d7; font-weight: bold;">__attribute__</span><span style="color: #4f97d7;">(</span><span style="color: #bc6ec5;">(</span>section<span style="color: #2d9574;">(</span>&#8220;.crcfill&#8221;<span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span><span style="color: #4f97d7;">)</span>
<span style="color: #7590db;">private_key</span><span style="color: #4f97d7;">[</span><span style="color: #a45bad;">100</span><span style="color: #4f97d7;">]</span> = <span style="color: #4f97d7;">{</span><span style="color: #a45bad;">0</span><span style="color: #4f97d7;">}</span>;
</code></pre>
</div>
</section>
</section>
<section>
<section id="slide-org9295206">
<h2 id="org9295206">Literals</h2>
<p>
Literals are tokens of C++ program that represent constant values embedded in source code.
</p>
</section>
<section id="slide-org051ba6a">
<h4 id="org051ba6a">Interger Literals</h4>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">Literal</td>
</tr>
</tbody>
</table>
</section>
</section>
<section>
<section id="slide-org4a936f7">
<h2 id="org4a936f7">Design</h2>

<div class="figure">
<p><img src="./images/HelloWorld_Class.png" alt="HelloWorld_Class.png" />
</p>
</div>

</section>
</section>
<section>
<section id="slide-orga776e34">
<h2 id="orga776e34">Write a Program</h2>

</section>
</section>
<section>
<section id="slide-org4caba46">
<h2 id="org4caba46">Build</h2>
<div class="outline-text-2" id="text-org4caba46">
</div>
</section>
<section id="slide-orga74fbf3">
<h4 id="orga74fbf3">Write Program</h4>
</section>
<section id="slide-org3982757">
<h4 id="org3982757">Compiling</h4>
</section>
<section id="slide-org3700a29">
<h4 id="org3700a29">Linking</h4>
<p>
Linker file 
</p>

</section>
</section>
<section>
<section id="slide-orgdaf4885">
<h2 id="orgdaf4885">Flash</h2>
<div class="outline-text-2" id="text-orgdaf4885">
</div>
</section>
<section id="slide-orgbf4a618">
<h3 id="orgbf4a618">Converting to binary</h3>
<p>
ELf file consists of additional header information but to load binary on target flash we need to strip down this 
additional information. 
</p>
<div class="org-src-container">

<pre  class="src src-shell"><code trim>
arm-none-eabi-objcopy -I elf -O binary firmware.elf firmware.bin

</code></pre>
</div>
</section>
<section id="slide-org7779e37">
<h3 id="org7779e37">Programming Controller</h3>
<div class="org-src-container">

<pre  class="src src-bash"><code trim>st-link_cli -C SWD -P firmware.bin <span style="color: #a45bad;">0x8000000</span> -V <span style="color: #2d9574;">"after_programming"</span>
</code></pre>
</div>
</section>
</section>
<section>
<section id="slide-org960b3d6">
<h2 id="org960b3d6">Debug</h2>
<div class="outline-text-2" id="text-org960b3d6">
</div>
</section>
<section id="slide-orgf91922c">
<h3 id="orgf91922c">Start debug server</h3>
</section>
<section id="slide-orgcd9c122">
<h3 id="orgcd9c122">load elf</h3>
</section>
<section id="slide-org6399904">
<h3 id="org6399904">Debug</h3>

</section>
</section>
<section>
<section id="slide-org59d62e3">
<h2 id="org59d62e3">Language Features</h2>
<ol>
<li>Statically typed</li>
<li>Support procedural , object oriented and generic programming paradigms</li>
<li>Compiled</li>
<li>Versatile standard library</li>
<li>Encapsulation</li>
<li>Inheritance</li>
<li>Polymorphism</li>

</ol>
</section>
</section>
<section>
<section id="slide-orgc038027">
<h2 id="orgc038027">C vs C++</h2>
<div class="outline-text-2" id="text-orgc038027">
</div>
</section>
<section id="slide-org2be726b">
<h3 id="org2be726b">Type safety</h3>
</section>
<section id="slide-orge444298">
<h3 id="orge444298">Zero cost abstraction</h3>
</section>
<section id="slide-orgc6e2cef">
<h3 id="orgc6e2cef">Higher level abstractions using classes</h3>
</section>
<section id="slide-org1468ded">
<h3 id="org1468ded">namespece</h3>
<ol>
<li>Provide a method for preventing name conflicts in large projects.</li>
<li>allow to group entities like classes, objects and functions under a name.</li>
<li>This way the global scope can be divided in "sub-scopes", each one with its own name.</li>

</ol>

<p>
#+SRC<sub>BEGIN</sub> C++
namespece stm32f767::Uart 
{
    classes Uart1
    {
    }
}
#+SRC<sub>END</sub>
</p>

</section>
</section>
<section>
<section id="slide-org5ad9183">
<h2 id="org5ad9183">Strongly typed</h2>
<div class="outline-text-2" id="text-org5ad9183">
</div>
</section>
<section id="slide-orgb7c64bf">
<h3 id="orgb7c64bf">enum class</h3>
</section>
</section>
<section>
<section id="slide-orgb401808">
<h2 id="orgb401808">Function Inline</h2>
<p>
Macros can be replaced with strongly typed
</p>
</section>
</section>
<section>
<section id="slide-orgb280121">
<h2 id="orgb280121">Type Conversions</h2>
<div class="outline-text-2" id="text-orgb280121">
</div>
</section>
<section id="slide-org004b1ee">
<h3 id="org004b1ee">dynamic<sub>cast</sub></h3>
</section>
<section id="slide-orgddd4a9a">
<h3 id="orgddd4a9a">reinterpret<sub>cast</sub></h3>
</section>
<section id="slide-orgba7694d">
<h3 id="orgba7694d">static<sub>cast</sub></h3>
</section>
<section id="slide-org247d072">
<h3 id="org247d072">const<sub>cast</sub></h3>
</section>
</section>
<section>
<section id="slide-org698a045">
<h2 id="org698a045">static asserts</h2>
<p>
This will help in catching logical errors early in compile time.
Basic sytax is
</p>

<p>
<code>static_assert ( bool_constexpr , message )</code> 
</p>

<p>
<a href="https://onlinegdb.com/HktaJw5Vr">Code</a>
</p>

</section>
</section>
<section>
<section id="slide-orga72c0fc">
<h2 id="orga72c0fc">scoped enums</h2>
<p>
An enumeration is a distinct type whose values are restricted to a range of values.
Intenally enumerations are of integer type. But C++ enumeration are more strongly typed compared to C. In C enum and interger are 
interchangeble but in C++ not unless explicitly casted.
</p>
</section>
<section id="slide-org6bf537d">
<h3 id="org6bf537d">Size of enumerations</h3>
<p>
Starting from C++ 11 we can now tell compiler to allocate specific size of enumerations constans. This will help in communication 
protocols parser we can directly use enumerations values in transmit or recieve buffer.
</p>

<div class="org-src-container">

<pre  class="src src-C"><code trim><span style="color: #bc6ec5;">#include</span> <span style="color: #4f97d7;">&lt;</span><span style="color: #2d9574;">stdio.h</span><span style="color: #4f97d7;">&gt;</span>
<span style="color: #4f97d7; font-weight: bold;">enum</span> <span style="color: #ce537a; font-weight: bold;">command</span> <span style="color: #4f97d7;">{</span> <span style="color: #7590db;">ON</span>, <span style="color: #7590db;">OFF</span><span style="color: #4f97d7;">}</span>;
<span style="color: #4f97d7; font-weight: bold;">enum</span> <span style="color: #ce537a; font-weight: bold;">command</span> <span style="color: #7590db;">c</span>;

<span style="color: #ce537a; font-weight: bold;">int</span> <span style="color: #bc6ec5; font-weight: bold;">main</span> <span style="color: #4f97d7;">()</span>
<span style="color: #4f97d7;">{</span>
  printf <span style="color: #bc6ec5;">(</span><span style="color: #2d9574;">"Hello World %d"</span>,<span style="color: #4f97d7; font-weight: bold;">sizeof</span><span style="color: #2d9574;">(</span>c<span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span>;

  <span style="color: #4f97d7; font-weight: bold;">return</span> <span style="color: #a45bad;">0</span>;
<span style="color: #4f97d7;">}</span>

</code></pre>
</div>

</section>
<section id="slide-org0cf3a12">
<h3 id="org0cf3a12">Size of scoped enumerations</h3>
<div class="org-src-container">

<pre  class="src src-C++"><code trim><span style="color: #bc6ec5;">#include</span> <span style="color: #4f97d7;">&lt;</span><span style="color: #2d9574;">iostream</span><span style="color: #4f97d7;">&gt;</span>

<span style="color: #4f97d7; font-weight: bold;">enum</span> <span style="color: #4f97d7; font-weight: bold;">class</span> <span style="color: #ce537a; font-weight: bold;">command</span> : <span style="color: #ce537a; font-weight: bold;">char</span> <span style="color: #4f97d7;">{</span> <span style="color: #7590db;">ON</span>, <span style="color: #7590db;">OFF</span><span style="color: #4f97d7;">}</span>;
<span style="color: #4f97d7; font-weight: bold;">enum</span> <span style="color: #4f97d7; font-weight: bold;">class</span> <span style="color: #ce537a; font-weight: bold;">functioncode</span> : <span style="color: #ce537a; font-weight: bold;">short</span> <span style="color: #4f97d7;">{</span> <span style="color: #7590db;">READ</span>, <span style="color: #7590db;">WRTE</span>, <span style="color: #7590db;">UPDATE</span> <span style="color: #4f97d7;">}</span>;

<span style="color: #ce537a; font-weight: bold;">int</span> <span style="color: #bc6ec5; font-weight: bold;">main</span> <span style="color: #4f97d7;">()</span>
<span style="color: #4f97d7;">{</span>
  <span style="color: #a45bad;">std</span>::cout &lt;&lt; <span style="color: #2d9574;">"scoped enum with size for command = "</span>
  &lt;&lt; <span style="color: #4f97d7; font-weight: bold;">sizeof</span><span style="color: #bc6ec5;">(</span>command<span style="color: #bc6ec5;">)</span> &lt;&lt; <span style="color: #a45bad;">std</span>::endl ;
  <span style="color: #a45bad;">std</span>::cout &lt;&lt; <span style="color: #2d9574;">"scoped enum with size for functioncode = "</span>
 &lt;&lt; <span style="color: #4f97d7; font-weight: bold;">sizeof</span><span style="color: #bc6ec5;">(</span>functioncode<span style="color: #bc6ec5;">)</span> &lt;&lt; <span style="color: #a45bad;">std</span>::endl ;
  <span style="color: #4f97d7; font-weight: bold;">return</span> <span style="color: #a45bad;">0</span>;
<span style="color: #4f97d7;">}</span>
</code></pre>
</div>
<p>
<a href="https://onlinegdb.com/BkplLLN4r">code</a>
</p>
</section>
</section>
<section>
<section id="slide-org81bbab9">
<h2 id="org81bbab9">User defined literals</h2>
<div class="outline-text-2" id="text-org81bbab9">
</div>
</section>
<section id="slide-org06f091c">
<h3 id="org06f091c">Temperature conversion</h3>
</section>
</section>
<section>
<section id="slide-org7dd8290">
<h2 id="org7dd8290">Delete functions</h2>
<p>
For specific device classes we don't want to create duplicate copy of same peripheral object. 
We can make sure nobody can accidently copy object we will delete copy constructor.
</p>

<pre  class="example">

</pre>

</section>
</section>
<section>
<section id="slide-org658ea70">
<h2 id="org658ea70">Declaring function pointers</h2>
<pre  class="example">
typedef bool (*Transmit)(char *);

using Transmit = bool(*)(char *);
</pre>

</section>
</section>
<section>
<section id="slide-org1672604">
<h2 id="org1672604">Object Orinted programming</h2>
<div class="outline-text-2" id="text-org1672604">
</div>
</section>
<section id="slide-org26952c7">
<h3 id="org26952c7">Operator overloading</h3>
<div class="org-src-container">

<pre  class="src src-C++"><code trim>
<span style="color: #ce537a; font-weight: bold;">return_type</span> <span style="color: #4f97d7; font-weight: bold;">operator</span> <span style="color: #ce537a; font-weight: bold;">operator_symbol</span> <span style="color: #4f97d7;">(</span>list <span style="color: #ce537a; font-weight: bold;">of</span> <span style="color: #7590db;">parameters</span><span style="color: #4f97d7;">)</span>

</code></pre>
</div>
</section>
<section id="slide-orgc726861">
<h3 id="orgc726861">Exercise Toggle gpio pin</h3>
</section>
</section>
<section>
<section id="slide-org85d1134">
<h2 id="org85d1134">Hello World</h2>
<p>
We will write hello world program which will print "Hello World of C++ " sting to serial port using micro controller UART3.
</p>

<aside class="notes">
<p>
Explain virtual com port.
</p>

</aside>

</section>
</section>
<section>
<section id="slide-org7b687cf">
<h2 id="org7b687cf">Mixing C and C++  libraries</h2>
<p>
C++ compiler will use name mangeling hence functions name used by user will have diffrent name for compiler. Hence if you
 want to use a function from C library we should tell compiler not to change its name by telling compiler for C linkage.
</p>

<pre  class="example">
extern int C_library_function(void);
</pre>

<p>
To do this on entire header file with exported functions we can used
</p>

<pre  class="example">

extern int C_library_function(void);
</pre>

</section>
</section>
<section>
<section id="slide-org5ebbcc4">
<h2 id="org5ebbcc4">Templates</h2>
</section>
</section>
<section>
<section id="slide-org02eced4">
<h2 id="org02eced4">std::Array</h2>
</section>
</section>
<section>
<section id="slide-org5a7e17b">
<h2 id="org5a7e17b">std::bitset</h2>
</section>
</section>
<section>
<section id="slide-orgb5b0bee">
<h2 id="orgb5b0bee">std::tuple</h2>
</section>
</section>
<section>
<section id="slide-orgcf0a0c8">
<h2 id="orgcf0a0c8">References</h2>
<div class="outline-text-2" id="text-orgcf0a0c8">
</div>
</section>
<section id="slide-org9cfd5ce">
<h3 id="org9cfd5ce">Gnu C</h3>
<div class="outline-text-3" id="text-org9cfd5ce">
</div>
</section>
<section id="slide-orgb267e20">
<h4 id="orgb267e20">Predefined macros</h4>
<p>
<a href="https://gcc.gnu.org/onlinedocs/cpp/Common-Predefined-Macros.html">https://gcc.gnu.org/onlinedocs/cpp/Common-Predefined-Macros.html</a>
</p>
</section>
<section id="slide-orgfd10f42">
<h3 id="orgfd10f42">Keil library</h3>
<div class="outline-text-3" id="text-orgfd10f42">
</div>
</section>
<section id="slide-orgcf67bd3">
<h4 id="orgcf67bd3">run time library support</h4>
<p>
<a href="http://www.keil.com/support/man/docs/armlib/armlib_chr1358938908603.htm">http://www.keil.com/support/man/docs/armlib/armlib_chr1358938908603.htm</a>
</p>

<p>
C++ libraries need C libraries for target specific support.
</p>
</section>
<section id="slide-org74ecae8">
<h3 id="org74ecae8">Imperative vs Declarative programming paradigm</h3>
<aside class="notes">
<p>
<a href="https://tylermcginnis.com/imperative-vs-declarative-programming/">https://tylermcginnis.com/imperative-vs-declarative-programming/</a>
</p>

</aside>

</section>
</section>
<section>
<section id="slide-org7645ca8">
<h2 id="org7645ca8">Program List</h2>
<div class="outline-text-2" id="text-org7645ca8">
</div>
</section>
<section id="slide-org58dd258">
<h3 id="org58dd258">Hello World 1</h3>
<p>
Introduce students to basic C++ development process by showing Hello world string on serial port using virtual com
port of nucleo platform.
</p>
</section>
<section id="slide-org0b1491d">
<h4 id="org0b1491d">Exercise</h4>
<ol>
<li>Twick program for another serial port.</li>
<li>Try diffrent settings.</li>

</ol>

</section>
<section id="slide-orgc28d628">
<h3 id="orgc28d628">Hello World 2</h3>
<p>
Constructor overloading to use non default baud rate settings.
</p>

</section>
<section id="slide-org8013a1e">
<h3 id="org8013a1e">Serial Port Interface</h3>

<div class="figure">
<p><img src="./images/SerialPort_Interface.png" alt="SerialPort_Interface.png" />
</p>
</div>

<p>
We will now start exploring object oriented programmin paradigms.
</p>

<p>
Till now for every uart change we have to create individual objects of individual classe. Using inheritance feature we will 
create a base class interface for uart which then be overridden by individual subclasses.
<a href="https://github.com/prasadghole/embeddedCppTrainingProjects/releases/tag/Serial_1">https://github.com/prasadghole/embeddedCppTrainingProjects/releases/tag/Serial_1</a>
</p>

</section>
<section id="slide-org0d130c0">
<h4 id="org0d130c0">Exercise</h4>
<p>
Implement class for Uart Port 3
</p>

<p>
<a href="https://github.com/prasadghole/embeddedCppTrainingProjects/tree/master/SerialPort_Interface_AllUart">https://github.com/prasadghole/embeddedCppTrainingProjects/tree/master/SerialPort_Interface_AllUart</a>
</p>

</section>
<section id="slide-org3999673">
<h3 id="org3999673">GPIO Class</h3>
<p>
Mostly this can be exercise for students. Instead of createing pin wise subclasses we can create port wise classes.
<img src="./images/Gpio_Class.png" alt="Gpio_Class.png" />
</p>

</section>
<section id="slide-org0e1b826">
<h4 id="org0e1b826">Exercise</h4>
<p>
Create a wrapper class (<b><b>adapter pattern</b></b>) so that for every board type we don't need to pass pin every time  we call 
api.
</p>

</section>
<section id="slide-org8a4945c">
<h4 id="org8a4945c">Overload initialization functions.</h4>
</section>
<section id="slide-org3fb356c">
<h4 id="org3fb356c">overload constructor to take non default settings</h4>

</section>
<section id="slide-org0d6ba24">
<h3 id="org0d6ba24">GPIO with bitset</h3>

</section>
<section id="slide-org62fc58d">
<h3 id="org62fc58d">GPIO with interrupt</h3>
<p>
How to integrate interrupt handlers. We will show case using member function.
</p>

</section>
<section id="slide-orgefe8f56">
<h4 id="orgefe8f56">Exercise</h4>
<p>
ISR handlers can be made using static functions.
</p>
</section>
<section id="slide-orge33ed2d">
<h4 id="orge33ed2d">Exercise</h4>
<p>
GPIO class is interface is mixture of pin vs port functons. Need to refactor so that pin and functons are binded 
togethor.
</p>
</section>
</section>
</div>
</div>
<script src="./js/reveal.js"></script>

<script>
// Full list of configuration options available here:
// https://github.com/hakimel/reveal.js#configuration
Reveal.initialize({

controls: true,
progress: true,
history: false,
center: true,
slideNumber: 'c',
rollingLinks: false,
keyboard: true,
overview: true,

theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none
transitionSpeed: 'default',
multiplex: {
    secret: '', // null if client
    id: '', // id, obtained from socket.io server
    url: '' // Location of socket.io server
},

// Optional libraries used to extend on reveal.js
dependencies: [
 { src: './lib/js/classList.js', condition: function() { return !document.body.classList; } },
 { src: './plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
 { src: './plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
 { src: './plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
 { src: './plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }]
});
</script>
</body>
</html>
